#!/bin/bash
set -euo pipefail

# Get the range of commits pushed
COMMIT_RANGE=$(git rev-list @{u}..HEAD)

# Combine all commit hashes into a single string
COMBINED_HASHES=$(echo "$COMMIT_RANGE" | tr '\n' ' ')

# Hash the combined string
FINAL_HASH=$(echo "$COMBINED_HASHES" | sha256sum | cut --delimiter=' ' --fields=1)

# Timestamp the final hash
timestamp "$FINAL_HASH"
echo "Timestamped the final hash: $FINAL_HASH"
