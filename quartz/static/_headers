# 1. Default Rule (HTML / Webpages)
# "no-cache" means the browser must check with Cloudflare before showing the page.
# This ensures users see new blog posts immediately.
#
# Security Headers Reference:
# - X-Content-Type-Options: Prevents MIME-type sniffing attacks
# - X-Frame-Options: Prevents clickjacking (SAMEORIGIN allows same-domain iframes)
# - Referrer-Policy: Controls referrer header (strict-origin-when-cross-origin is a good default)
# - Permissions-Policy: Disables browser features we don't need (camera, mic, location, payments)
# - HSTS: Forces HTTPS for 1 year with subdomains; preload enables browser preload list
# - COOP: Isolates browsing context from cross-origin windows
#
# Content-Security-Policy Directives:
# - default-src 'self': Only allow resources from same origin by default
# - script-src 'self' 'unsafe-inline': Allow same-origin + inline scripts (needed for Quartz)
# - style-src 'self' 'unsafe-inline': Allow same-origin + inline styles
# - img-src 'self' assets.turntrout.com data:: Images from self, CDN, and data URIs
# - media-src 'self' assets.turntrout.com: Audio/video from self and CDN
# - font-src 'self': Fonts only from same origin
# - frame-src: Allowed iframe sources (YouTube, Manifold, Palform, Fatebook, jacobgw.com)
# - frame-ancestors 'self': Only allow this site to be framed by itself
# - connect-src 'self': Restrict fetch/XHR/WebSocket to same origin
# - base-uri 'self': Prevent base tag injection
# - form-action 'self' dash.palform.app: Restrict form submissions
# - upgrade-insecure-requests: Upgrade HTTP to HTTPS
/*
  Cache-Control: public, no-cache
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=(), payment=()
  Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
  Cross-Origin-Opener-Policy: same-origin
  Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' https://assets.turntrout.com data:; media-src 'self' https://assets.turntrout.com; font-src 'self'; frame-src 'self' https://www.youtube.com https://manifold.markets https://dash.palform.app https://fatebook.io https://jacobgw.com; frame-ancestors 'self'; connect-src 'self'; base-uri 'self'; form-action 'self' https://dash.palform.app; upgrade-insecure-requests

# 2. Stylesheets & Scripts (1 Week)
/*.css
  Cache-Control: public, max-age=604800
/*.js
  Cache-Control: public, max-age=604800

# 3. Fonts (1 Year)
# These rarely change. Cache them forever to stop the layout shift/flicker.
# If you change the font, you MUST rename the file.
/*.woff2
  Cache-Control: public, max-age=31536000, immutable
/*.woff
  Cache-Control: public, max-age=31536000, immutable
/*.ttf
  Cache-Control: public, max-age=31536000, immutable

# 4. Local Media & Images (1 Week)
# Covers: pond.mov, pond.webm, favicons, etc.
/*.jpg
  Cache-Control: public, max-age=604800, immutable
/*.png
  Cache-Control: public, max-age=604800, immutable
/*.ico
  Cache-Control: public, max-age=604800, immutable
/*.svg
  Cache-Control: public, max-age=604800, immutable
/*.avif
  Cache-Control: public, max-age=604800, immutable
/*.mov
  Cache-Control: public, max-age=604800, immutable
/*.webm
  Cache-Control: public, max-age=604800, immutable