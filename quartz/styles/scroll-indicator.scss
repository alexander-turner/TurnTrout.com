@use "./variables.scss" as *;

// Make .katex shrink-wrap to content width so .katex-display's
// overflow: auto creates a proper scroll context. Without this,
// .katex is display: block (same width as parent), and the inline
// math content overflows .katex internally without triggering
// .katex-display's scroll.
.scroll-indicator > .katex-display > .katex {
  display: inline-block;
}

.scroll-indicator {
  position: relative;
  overflow: clip;

  &::before,
  &::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2rem;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    transition: opacity $transition-duration-quick ease;
  }

  &::before {
    left: 0;
    background: linear-gradient(to right, var(--scroll-fade-color, var(--background)), transparent);
  }

  &::after {
    right: 0;
    background: linear-gradient(to left, var(--scroll-fade-color, var(--background)), transparent);
  }

  &.can-scroll-left::before {
    opacity: 1;
  }

  &.can-scroll-right::after {
    opacity: 1;
  }
}

// Preserve footnote inline-block table alignment
li[id^="user-content-fn-"] .scroll-indicator {
  display: inline-block;
  vertical-align: top;
  max-width: 100%;
}

// Match admonition background for fade gradient
.admonition .scroll-indicator {
  --scroll-fade-color: var(--bg);
}
